# 密码重置功能说明

## 功能概述
密码重置功能已完成开发，包含以下内容：
- API 接口封装
- 重置密码页面组件
- 路由配置
- 完整的错误处理和用户提示

## 文件结构

### 1. API 文件
**路径**: `src/api/passwordReset.ts`

包含两个接口：
- `requestPasswordReset`: 请求重置密码（发送邮件）
- `resetPassword`: 重置密码

### 2. 页面组件
**路径**: `src/views/ResetPassword.vue`

UI 设计特点：
- 参考个人中心界面的 UI 风格
- 使用渐变色背景和卡片设计
- 圆角、阴影等现代化设计元素
- 响应式布局，支持移动端
- 动画效果提升用户体验

### 3. 路由配置
**路径**: `src/router/index.ts`

路由名称: `resetPassword`
路由路径: `/resetPassword`
支持参数: `token` (通过 query 参数传递)

## 使用方式

### 访问链接格式
```
http://your-domain.com/resetPassword?token=abc123...
```

### 功能流程
1. 用户点击"忘记密码"
2. 输入邮箱地址
3. 后端发送重置密码邮件
4. 用户点击邮件中的链接（包含 token）
5. 打开重置密码页面
6. 输入新密码和确认密码
7. 提交表单完成重置
8. 自动跳转到登录页

## 表单验证规则

1. **新密码**
   - 必填
   - 最少 6 位字符

2. **确认密码**
   - 必填
   - 必须与新密码一致

## 错误处理

### 前端处理
- token 为空：显示"链接无效"提示
- 密码不一致：显示"两次输入的密码不一致"
- 密码长度不足：显示"密码长度最少6位"

### 后端响应处理
- `code: 200`: 重置成功，显示"密码重置成功，请使用新密码登录"
- `code: 400`: token 无效或过期，显示"链接已过期，请重新申请"
- `code: 404`: 用户不存在，显示"用户不存在"
- `code: 500`: 服务器错误，显示"重置失败，请稍后重试"

## 测试方式

### 1. 本地测试
1. 启动开发服务器: `npm run dev`
2. 访问: `http://localhost:5173/resetPassword?token=test-token-123`
3. 测试表单验证和提交

### 2. 完整流程测试
需要后端接口支持：
1. 调用 `/api/v1/user/requestPasswordReset` 接口
2. 查收邮件获取 token
3. 访问重置密码页面
4. 完成密码重置

## UI 特点

### 设计风格
- **主题配色**: 紫色系主题色 (#8b5cf6 → #d946ef)
- **背景**: 使用系统背景色，无滚动条，干净简洁
- **卡片设计**: 白色圆角卡片 (12px)，轻微阴影，紫色边框装饰
- **图标装饰**: 
  - 圆角图标容器 (16px 圆角)
  - 右上角脉冲小圆点动画
  - 表单字段带图标和紫色必填标签
- **渐变效果**: 
  - 图标背景渐变
  - 标题文字渐变
  - 按钮渐变 + 光泽划过效果
- **交互动画**: fadeInUp、scaleIn、pulse、按钮光泽动画
- **装饰元素**:
  - 安全验证徽章
  - 表单标签带图标和标签
  - 安全提示信息框
  - 返回登录按钮带滑动效果

### 响应式设计
- 桌面端：最大宽度 440px 居中显示
- 移动端：适配小屏幕，调整字体和间距，自动填满宽度
- 内容高度自适应，无不必要的滚动条

## 注意事项

1. **Token 有效期**: 后端设置为 10 分钟
2. **Token 一次性**: 每个 token 只能使用一次
3. **重置后需重新登录**: 密码重置成功后需使用新密码登录
4. **安全性**: 
   - 前端验证密码长度
   - 后端验证 token 有效性
   - HTTPS 传输保证安全

## 后续优化建议

1. 添加密码强度指示器
2. 支持显示/隐藏密码
3. 添加重新发送邮件功能
4. 记录密码重置日志
5. 添加验证码验证（防止滥用）
